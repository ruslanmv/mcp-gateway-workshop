
version: "3.9"
services:
  langflow:
    image: langflowai/langflow:latest
    ports: ["7860:7860"]
    command: ["langflow", "run", "--host", "0.0.0.0", "--port", "7860"]
  adapter:
    build:
      context: .
      dockerfile: docker/adapter/Dockerfile
    environment:
      - LANGFLOW_URL=http://langflow:7860/api/v1/run/<flow_id>
    depends_on:
      - langflow
    ports: ["9100:9100"]
  agent:
    build:
      context: .
      dockerfile: docker/agent/Dockerfile
    environment:
      - GATEWAY_URL=http://gateway:4444
    depends_on:
      - gateway
  gateway:
    image: ghcr.io/context-forge/mcpgateway:latest
    ports: ["4444:4444"]
    environment:
      - OTEL_ENABLE_OBSERVABILITY=false
      - WELL_KNOWN_CACHE_MAX_AGE=7200
  phoenix:
    image: arizephoenix/phoenix:latest
    ports: ["6006:6006", "4317:4317"]
    restart: unless-stopped
